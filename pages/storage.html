<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../assets/img/logo_NBTravel.ico">
    <title>LSD Adm NBTravel</title>
    <link rel="stylesheet" type="text/css" href="../css/storage.css">
</head>
<body>
    <div>
        <h2>Database Akun Adm NBTravel</h2>
        <!-- Daftar pengguna -->
        <ul id="user-list"></ul>
        
        <!-- Tabel anggota -->
        <h2>Database Profile Adm NBTravel</h2>
        <table>
          <thead>
            <tr>
              <th>Nama</th>
              <th>Email</th>
              <th>Jabatan</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody id="anggota-table">
            <!-- Data anggota akan ditambahkan di sini -->
          </tbody>
        </table>
    </div>

    <script>
        // Ambil data pengguna dari localStorage
        var usersData = localStorage.getItem('users');
        var users = usersData ? JSON.parse(usersData) : [];

        // Ambil data anggota dari localStorage
        var anggotaData = localStorage.getItem('anggotaData');
        var anggota = anggotaData ? JSON.parse(anggotaData) : [];

        var userListElement = document.getElementById('user-list');
        var anggotaTableElement = document.getElementById('anggota-table');

        // Fungsi untuk menghapus pengguna
        function deleteUser(index) {
            users.splice(index, 1); // Hapus pengguna dari array
            localStorage.setItem('users', JSON.stringify(users)); // Simpan kembali ke LocalStorage
            displayUsers(); // Tampilkan ulang daftar pengguna
        }

        // Fungsi untuk menghapus anggota
        function deleteAnggota(index) {
            anggota.splice(index, 1); // Hapus anggota dari array
            localStorage.setItem('anggotaData', JSON.stringify(anggota)); // Simpan kembali ke LocalStorage
            displayAnggota(); // Tampilkan ulang tabel anggota
        }

        // Fungsi untuk menampilkan pengguna
        function displayUsers() {
            userListElement.innerHTML = ''; // Bersihkan daftar pengguna

            users.forEach(function(user, index) {
                var userElement = document.createElement('li');

                // Informasi pengguna
                userElement.textContent = `Pengguna ${index + 1}: ${user.username} (Kata sandi: ${user.password})`;

                // Tombol hapus pengguna
                var deleteButton = document.createElement('button');
                deleteButton.textContent = 'Hapus';
                deleteButton.onclick = function() {
                    deleteUser(index);
                };

                userElement.appendChild(deleteButton); // Tambahkan tombol ke elemen pengguna
                userListElement.appendChild(userElement); // Tambahkan pengguna ke daftar
            });
        }

        // Fungsi untuk menampilkan anggota
        function displayAnggota() {
            anggotaTableElement.innerHTML = ''; // Bersihkan tabel anggota

            anggota.forEach(function(anggota, index) {
                var row = document.createElement('tr');

                // Informasi anggota
                row.innerHTML = `
                    <td>${anggota.nama}</td>
                    <td>${anggota.email}</td>
                    <td>${anggota.jabatan}</td>
                `;

                // Tombol hapus anggota
                var deleteButton = document.createElement('button');
                deleteButton.textContent = 'Hapus';
                deleteButton.onclick = function() {
                    deleteAnggota(index);
                };

                var aksiCell = document.createElement('td');
                aksiCell.appendChild(deleteButton);

                row.appendChild(aksiCell);
                anggotaTableElement.appendChild(row); // Tambahkan baris ke tabel anggota
            });
        }

        // Panggil fungsi untuk menampilkan data saat halaman dimuat
        displayUsers(); // Tampilkan daftar pengguna
        displayAnggota(); // Tampilkan tabel anggota
    </script>
</body>
</html>
